<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<tdml:testSuite xmlns:ex="http://example.com" xmlns="http://example.com"
  xmlns:tdml="http://www.ibm.com/xmlns/dfdl/testData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <tdml:defineSchema name="inputValueCalc-Embedded.dfdl.xsd">


    <xs:include schemaLocation="org/apache/daffodil/xsd/DFDLGeneralFormat.dfdl.xsd"/>
    <dfdl:format ref="ex:GeneralFormat" lengthKind="delimited"
      lengthUnits="bytes" encoding="UTF-8" separator="" initiator=""
      terminator="" occursCountKind="parsed" ignoreCase="no"
      textNumberRep="standard" representation="text" />

    <xs:element name="ivc_01" type="example1" />

    <xs:complexType name="example1">
      <xs:sequence>
        <xs:element name="num1" type="xs:int" />
        <xs:element name="num1_square" type="xs:int"
          dfdl:inputValueCalc="{../ex:num1 * ../ex:num1 }" />
        <xs:element name="num2" type="xs:int"
          dfdl:inputValueCalc="{81}" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="ivc_02" type="example2" />

    <xs:complexType name="example2">
      <xs:sequence>
        <xs:element name="num1_square" type="xs:int"
          dfdl:inputValueCalc="{../ex:num1 * ../ex:num1 }" />
        <xs:element name="num1" type="xs:int" />
        <xs:element name="num2" type="xs:int"
          dfdl:inputValueCalc="{81}" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="ivc_03" dfdl:lengthKind="implicit">
      <xs:complexType>
        <xs:sequence dfdl:separator=","
          dfdl:separatorPosition="infix" dfdl:terminator=";">
          <xs:element name="e1" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e2" nillable="true" dfdl:nilKind="literalValue"
            dfdl:nilValue="%ES;" type="xs:int" dfdl:lengthKind="delimited" />
          <xs:element name="e2_square" type="xs:int"
            dfdl:inputValueCalc="{../ex:e2 * ../ex:e2 }" />
          <xs:element name="e3" type="xs:int"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_04" dfdl:lengthKind="implicit">
      <xs:complexType>
        <xs:sequence dfdl:separator=","
          dfdl:separatorPosition="infix" dfdl:terminator=";">
          <xs:element name="e1" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e2" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e3" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="divide" type="xs:float"
            dfdl:inputValueCalc="{ xs:int(../ex:e2) div xs:int(../ex:e3) }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_05" dfdl:lengthKind="implicit">
      <xs:complexType>
        <xs:sequence dfdl:separator=","
          dfdl:separatorPosition="infix" dfdl:terminator=";">
          <xs:element name="e1" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e2" nillable="true" dfdl:nilKind="literalValue"
            dfdl:nilValue="%ES;" type="xs:int" dfdl:lengthKind="delimited" />
          <xs:element name="e2_square" type="xs:int"
            dfdl:inputValueCalc="{../ex:e2 * ../ex:e2 }" />
          <xs:element name="e3" type="xs:int"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_06" dfdl:lengthKind="implicit">
      <xs:complexType>
        <xs:sequence dfdl:separator=","
          dfdl:separatorPosition="infix" dfdl:terminator=";">
          <!-- putting an inputValueCalc element first in the sequence to 
            insure
            that it correctly determines there should not be any separator 
            before element
            e1 which is the first physical element. -->
          <xs:element name="ivc_is_first" type="xs:int"
            dfdl:inputValueCalc="{ 42 }" />
          <xs:element name="e1" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e2" nillable="true" dfdl:nilKind="literalValue"
            dfdl:nilValue="%ES;" type="xs:int" dfdl:lengthKind="delimited" />
          <xs:element name="e3" type="xs:int"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_08" type="example3" />

    <xs:complexType name="example3">
      <xs:sequence>
        <xs:element name="num1" type="xs:int" />
        <xs:element name="num1_square" type="xs:int"
          dfdl:inputValueCalc="{parent::ex:ivc_08/ex:num1 * parent::ex:ivc_08/ex:num1 }" />
        <xs:element name="num2" type="xs:int"
          dfdl:inputValueCalc="{81}" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="ivc_09" type="example4" />

    <xs:complexType name="example4">
      <xs:sequence>
        <xs:element name="num1" type="xs:int" />
        <xs:element name="num1_square" type="xs:int"
          dfdl:inputValueCalc="{parent::ez:ivc_09/ex:num1 * parent::ez:ivc_09/ex:num1 }" />
        <xs:element name="num2" type="xs:int"
          dfdl:inputValueCalc="{81}" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="ivc_10" type="example5" />

    <xs:complexType name="example5">
      <xs:sequence>
        <xs:element name="num1" type="xs:int" />
        <xs:element name="num1_square" type="xs:int"
          dfdl:inputValueCalc="{parent::ex:ivc_10/ex:num1 * parent::ex:ivc_10/ex:num1 }" />
        <xs:element name="num2" type="xs:int"
          dfdl:inputValueCalc="{ $ex:var }" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="ivc_11">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="str" type="xs:string"
            dfdl:inputValueCalc="{ ..\abcde }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_12_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_int_range_min" type="xs:int" dfdl:inputValueCalc="{ -2147483649 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_12_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_int_range_min" type="xs:int" dfdl:inputValueCalc="{ xs:int(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_12_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_int_range_max" type="xs:int" dfdl:inputValueCalc="{ 2147483648 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_12_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_int_range_max" type="xs:int" dfdl:inputValueCalc="{ xs:int(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_12_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="ivc_int_range_max" type="xs:int" dfdl:inputValueCalc="{ 2147483647 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_12_4">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="ivc_int_range_max" type="xs:int" dfdl:inputValueCalc="{ -2147483648 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_13_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_min" type="xs:short" dfdl:inputValueCalc="{ -32769 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_13_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_min" type="xs:short" dfdl:inputValueCalc="{ xs:short(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_13_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_max" type="xs:short" dfdl:inputValueCalc="{ 32768 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_13_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_max" type="xs:short" dfdl:inputValueCalc="{ xs:short(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_13_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_max" type="xs:short" dfdl:inputValueCalc="{ 32767 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_13_4">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_short_range_max" type="xs:short" dfdl:inputValueCalc="{ -32768 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_14_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_uint_range_min" type="xs:unsignedInt" dfdl:inputValueCalc="{ -1 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_14_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_uint_range_min" type="xs:unsignedInt" dfdl:inputValueCalc="{ xs:unsignedInt(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_14_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_uint_range_max" type="xs:unsignedInt" dfdl:inputValueCalc="{ 4294967297 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_14_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_uint_range_max" type="xs:unsignedInt" dfdl:inputValueCalc="{ xs:unsignedInt(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_14_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_uint_range_max" type="xs:unsignedInt" dfdl:inputValueCalc="{ 4294967295 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_15_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ushort_range_min" type="xs:unsignedShort" dfdl:inputValueCalc="{ -1 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_15_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ushort_range_min" type="xs:unsignedShort" dfdl:inputValueCalc="{ xs:unsignedShort(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_15_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ushort_range_max" type="xs:unsignedShort" dfdl:inputValueCalc="{ 65537 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_15_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ushort_range_max" type="xs:unsignedShort" dfdl:inputValueCalc="{ xs:unsignedShort(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_15_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ushort_range_max" type="xs:unsignedShort" dfdl:inputValueCalc="{ 65535 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_16_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_min" type="xs:long" dfdl:inputValueCalc="{ -9223372036854775809 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_16_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_min" type="xs:long" dfdl:inputValueCalc="{ xs:long(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_16_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_max" type="xs:long" dfdl:inputValueCalc="{ 9223372036854775808 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_16_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_max" type="xs:long" dfdl:inputValueCalc="{ xs:long(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_16_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_max" type="xs:long" dfdl:inputValueCalc="{ 9223372036854775807 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_16_4">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_long_range_max" type="xs:long" dfdl:inputValueCalc="{ -9223372036854775808 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_17_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ulong_range_min" type="xs:unsignedLong" dfdl:inputValueCalc="{ -1 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_17_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ulong_range_min" type="xs:unsignedLong" dfdl:inputValueCalc="{ xs:unsignedLong(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_17_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ulong_range_max" type="xs:unsignedLong" dfdl:inputValueCalc="{ 18446744073709551616 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_17_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ulong_range_max" type="xs:unsignedLong" dfdl:inputValueCalc="{ xs:unsignedLong(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_17_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ulong_range_max" type="xs:unsignedLong" dfdl:inputValueCalc="{ 18446744073709551615 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_18_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_min" type="xs:byte" dfdl:inputValueCalc="{ -129 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_18_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_min" type="xs:byte" dfdl:inputValueCalc="{ xs:byte(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_18_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_max" type="xs:byte" dfdl:inputValueCalc="{ 128 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_18_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_max" type="xs:byte" dfdl:inputValueCalc="{ xs:byte(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_18_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_max" type="xs:byte" dfdl:inputValueCalc="{ 127 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_18_4">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_byte_range_max" type="xs:byte" dfdl:inputValueCalc="{ -128 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_19_1_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ubyte_range_min" type="xs:unsignedByte" dfdl:inputValueCalc="{ -1 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_19_1_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ubyte_range_min" type="xs:unsignedByte" dfdl:inputValueCalc="{ xs:unsignedByte(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_19_2_a">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ubyte_range_max" type="xs:unsignedByte" dfdl:inputValueCalc="{ 257 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_19_2_b">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ubyte_range_max" type="xs:unsignedByte" dfdl:inputValueCalc="{ xs:unsignedByte(../ex:num) }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_19_3">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:string" />
          <xs:element name="ivc_ubyte_range_max" type="xs:unsignedByte" dfdl:inputValueCalc="{ 255 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_20">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="a" type="xs:double" dfdl:inputValueCalc="{ xs:double('nan') }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_21">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="a" type="xs:int" dfdl:representation="binary" dfdl:inputValueCalc="{ 123 }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_22">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="invalid" type="xs:string" dfdl:inputValueCalc="{ ../ex:invalid }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_23">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="invalid" type="xs:int" dfdl:inputValueCalc="{ ../../ex:ivc_23 }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_24">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="num" type="xs:int" />
          <xs:element name="invalid" type="xs:int" minOccurs="0" dfdl:inputValueCalc="{ ../ex:num }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="ivc_25">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="a" type="xs:int" minOccurs="2" maxOccurs="5" dfdl:inputValueCalc="{ 5 }"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="ivc_26" type="xs:double" dfdl:inputValueCalc="{ 5 }" />

    <xs:element name="ivc_27">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="a" type="xs:double" dfdl:inputValueCalc="{ 3 }" dfdl:outputValueCalc="{ 4 }" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

  </tdml:defineSchema>

  <tdml:defineSchema name="inputValueCalc-invalid.dfdl.xsd">

    <xs:include schemaLocation="org/apache/daffodil/xsd/DFDLGeneralFormat.dfdl.xsd"/>
    <dfdl:format ref="ex:GeneralFormat" lengthKind="delimited"
      lengthUnits="bytes" encoding="UTF-8" separator="" initiator=""
      occursCountKind="parsed" ignoreCase="no" inputValueCalc="{ 5 }"
      textNumberRep="standard" representation="text"/>

    <xs:element name="e1" type="xs:int"  />

  </tdml:defineSchema>

  <tdml:parserTestCase name="InputValueCalc_01"
    root="ivc_01" model="inputValueCalc-Embedded.dfdl.xsd" description="Section 17 inputValueCalc - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <ivc_01>
          <num1>7</num1>
          <num1_square>49</num1_square>
          <num2>81</num2>
        </ivc_01>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_02"
    root="ivc_02" model="inputValueCalc-Embedded.dfdl.xsd"
    description="Section 17 inputValueCalc, forward reference- DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_03"
    root="ivc_03" model="inputValueCalc-Embedded.dfdl.xsd"
    description="Section 17 inputValueCalc, referencing a missing nillable element - DFDL-17-007R">

    <tdml:document><![CDATA[0,,5;]]></tdml:document>

    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_04"
    root="ivc_04" model="inputValueCalc-Embedded.dfdl.xsd" description="division by zero - DFDL-17-007R">

    <tdml:document><![CDATA[5,11,0;]]></tdml:document>

    <tdml:errors>
      <tdml:error>divide</tdml:error>
      <tdml:error>by zero</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_05"
    root="ivc_05" model="inputValueCalc-Embedded.dfdl.xsd" description="Section 17 inputValueCalc - DFDL-17-007R">

    <tdml:document><![CDATA[0,11,5;]]></tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_05>
          <e1>0</e1>
          <e2>11</e2>
          <e2_square>121</e2_square>
          <e3>5</e3>
        </ivc_05>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_06"
    root="ivc_06" model="inputValueCalc-Embedded.dfdl.xsd" description="Section 17 inputValueCalc - DFDL-17-007R">

    <tdml:document><![CDATA[0,11,5;]]></tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_06>
          <ivc_is_first>42</ivc_is_first>
          <e1>0</e1>
          <e2>11</e2>
          <e3>5</e3>
        </ivc_06>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_08"
    root="ivc_08" model="inputValueCalc-Embedded.dfdl.xsd"
    description="Same as InputValueCalc_01 except use of parent:: - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <ivc_08>
          <num1>7</num1>
          <num1_square>49</num1_square>
          <num2>81</num2>
        </ivc_08>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_09"
    root="ivc_09" model="inputValueCalc-Embedded.dfdl.xsd"
    description="Same as InputValueCalc_08 except invalid prefix before ivc_09 - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>ez</tdml:error>
      <tdml:error>prefix</tdml:error>
      <tdml:error>no corresponding namespace</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_10"
    root="ivc_10" model="inputValueCalc-Embedded.dfdl.xsd"
    description="Same as InputValueCalc_08 except using an undefined variable - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error />
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_11"
    root="ivc_11" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error />
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Int_Range_Max_Pass"
    root="ivc_12_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_12_3>
          <num>7</num>
          <ivc_int_range_max>2147483647</ivc_int_range_max>
        </ivc_12_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

 
  <tdml:parserTestCase name="InputValueCalc_Int_Range_Min_Fail_CompileTime"
    root="ivc_12_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-2147483649</tdml:error><tdml:error>Int</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Int_Range_Min_Fail_RunTime"
    root="ivc_12_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-2147483649</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-2147483649</tdml:error><tdml:error>Int</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Int_Range_Min_Pass"
    root="ivc_12_4" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_12_4>
          <num>7</num>
          <ivc_int_range_max>-2147483648</ivc_int_range_max>
        </ivc_12_4>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Int_Range_Max_Fail_CompileTime"
    root="ivc_12_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>2147483648</tdml:error><tdml:error>Int</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Int_Range_Max_Fail_RunTime"
    root="ivc_12_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>2147483648</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>2147483648</tdml:error><tdml:error>Int</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Short_Range_Max_Pass"
    root="ivc_13_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_13_3>
          <num>7</num>
          <ivc_short_range_max>32767</ivc_short_range_max>
        </ivc_13_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Short_Range_Min_Fail_CompileTime"
    root="ivc_13_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-32769</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition error</tdml:error><tdml:error>-32769</tdml:error><tdml:error>Short</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Short_Range_Min_Fail_RunTime"
    root="ivc_13_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-32769</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-32769</tdml:error><tdml:error>Short</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Short_Range_Min_Pass"
    root="ivc_13_4" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_13_4>
          <num>7</num>
          <ivc_short_range_max>-32768</ivc_short_range_max>
        </ivc_13_4>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Short_Range_Max_Fail_CompileTime"
    root="ivc_13_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>32768</tdml:error><tdml:error>Short</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Short_Range_Max_Fail_RunTime"
    root="ivc_13_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>32768</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>32768</tdml:error><tdml:error>Short</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedInt_Range_Max_Pass"
    root="ivc_14_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_14_3>
          <num>7</num>
          <ivc_uint_range_max>4294967295</ivc_uint_range_max>
        </ivc_14_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedInt_Range_Min_Fail_CompileTime"
    root="ivc_14_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedInt</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedInt_Range_Min_Fail_RunTime"
    root="ivc_14_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-1</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedInt</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedInt_Range_Max_Fail_CompileTime"
    root="ivc_14_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>4294967297</tdml:error><tdml:error>UnsignedInt</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedInt_Range_Max_Fail_RunTime"
    root="ivc_14_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>4294967296</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>4294967296</tdml:error><tdml:error>UnsignedInt</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedShort_Range_Max_Pass"
    root="ivc_15_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_15_3>
          <num>7</num>
          <ivc_ushort_range_max>65535</ivc_ushort_range_max>
        </ivc_15_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedShort_Range_Min_Fail_CompileTime"
    root="ivc_15_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedShort</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedShort_Range_Min_Fail_RunTime"
    root="ivc_15_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-1</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedShort</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedShort_Range_Max_Fail_CompileTime"
    root="ivc_15_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>65537</tdml:error><tdml:error>UnsignedShort</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedShort_Range_Max_Fail_RunTime"
    root="ivc_15_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>65537</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>65537</tdml:error><tdml:error>UnsignedShort</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Long_Range_Max_Pass"
    root="ivc_16_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_16_3>
          <num>7</num>
          <ivc_long_range_max>9223372036854775807</ivc_long_range_max>
        </ivc_16_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Long_Range_Min_Fail_CompileTime"
    root="ivc_16_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-9223372036854775809</tdml:error><tdml:error>Long</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Long_Range_Min_Fail_RunTime"
    root="ivc_16_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-9223372036854775809</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-9223372036854775809</tdml:error><tdml:error>Long</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Long_Range_Min_Pass"
    root="ivc_16_4" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_16_4>
          <num>7</num>
          <ivc_long_range_max>-9223372036854775808</ivc_long_range_max>
        </ivc_16_4>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Long_Range_Max_Fail_CompileTime"
    root="ivc_16_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>9223372036854775808</tdml:error><tdml:error>Long</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Long_Range_Max_Fail_RunTime"
    root="ivc_16_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>9223372036854775808</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>9223372036854775808</tdml:error><tdml:error>Long</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedLong_Range_Max_Pass"
    root="ivc_17_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_17_3>
          <num>7</num>
          <ivc_ulong_range_max>18446744073709551615</ivc_ulong_range_max>
        </ivc_17_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedLong_Range_Min_Fail_CompileTime"
    root="ivc_17_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedLong</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedLong_Range_Min_Fail_RunTime"
    root="ivc_17_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-1</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-1</tdml:error><tdml:error>UnsignedLong</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedLong_Range_Max_Fail_CompileTime"
    root="ivc_17_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>18446744073709551616</tdml:error><tdml:error>UnsignedLong</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedLong_Range_Max_Fail_RunTime"
    root="ivc_17_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>18446744073709551616</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>18446744073709551616</tdml:error><tdml:error>UnsignedLong</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Max_Pass"
    root="ivc_18_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_18_3>
          <num>7</num>
          <ivc_byte_range_max>127</ivc_byte_range_max>
        </ivc_18_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Min_Fail_CompileTime"
    root="ivc_18_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>-129</tdml:error><tdml:error>Byte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Min_Fail_RunTime"
    root="ivc_18_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-129</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>-129</tdml:error><tdml:error>Byte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Min_Pass"
    root="ivc_18_4" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_18_4>
          <num>7</num>
          <ivc_byte_range_max>-128</ivc_byte_range_max>
        </ivc_18_4>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Max_Fail_CompileTime"
    root="ivc_18_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>128</tdml:error><tdml:error>Byte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_Byte_Range_Max_Fail_RunTime"
    root="ivc_18_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>128</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error><tdml:error>128</tdml:error><tdml:error>Byte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedByte_Range_Max_Pass"
    root="ivc_19_3" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_19_3>
          <num>7</num>
          <ivc_ubyte_range_max>255</ivc_ubyte_range_max>
        </ivc_19_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="InputValueCalc_UnsignedByte_Range_Min_Fail_CompileTime"
    root="ivc_19_1_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
   <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>-1</tdml:error>
      <tdml:error>UnsignedByte</tdml:error>
     </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedByte_Range_Min_Fail_RunTime"
    root="ivc_19_1_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>-1</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error>
      <tdml:error>-1</tdml:error>
      <tdml:error>UnsignedByte</tdml:error>
     </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedByte_Range_Max_Fail_CompileTime"
    root="ivc_19_2_a" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>257</tdml:error>
      <tdml:error>UnsignedByte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:parserTestCase name="InputValueCalc_UnsignedByte_Range_Max_Fail_RunTime"
    root="ivc_19_2_b" model="inputValueCalc-Embedded.dfdl.xsd" description="Syntax error - DFDL-17-007R">

    <tdml:document>257</tdml:document>
    <tdml:errors>
      <tdml:error>Parse Error</tdml:error>
      <tdml:error>257</tdml:error>
      <tdml:error>UnsignedByte</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_nonmatching_types
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_20
	Purpose: This test calculates a type that does not conform to the base type of the element and should result in a schema definition error.
  -->
  <tdml:parserTestCase name="InputValueCalc_nonmatching_types"
    root="ivc_20" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R">

    <tdml:document/>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error><tdml:error>nan</tdml:error><tdml:error>Double</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_no_representation
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_21
	Purpose: This test shows that elements that use inputValueCalc do not have a representation in the datastream and representation properties are ignored.
  -->
  <tdml:parserTestCase name="InputValueCalc_no_representation"
    root="ivc_21" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R">

    <tdml:document/>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ivc_21>
	  <a>123</a>
	</ivc_21>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_refers_self
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_22
	Purpose: This test has an inputValueCalc that refers to itself and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_refers_self"
    root="ivc_22" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>Placeholder</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_circular_ref
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_23
	Purpose: This test has an inputValueCalc with a circular reference and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_circular_ref"
    root="ivc_23" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>Placeholder</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_optional_elem
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_24
	Purpose: This test has an inputValueCalc on an optional element and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_optional_elem"
    root="ivc_24" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R6">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>inputValueCalc</tdml:error>
      <tdml:error>array</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_array_elem
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_25
	Purpose: This test has an inputValueCalc on an array element and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_array_elem"
    root="ivc_25" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R6">

    <tdml:document/>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>inputValueCalc</tdml:error>
      <tdml:error>array</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_global_elem
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_26
	Purpose: This test has an inputValueCalc on a global element and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_global_elem"
    root="ivc_26" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R6">

    <tdml:document/>
    <tdml:errors>
      <tdml:error>Placeholder</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_with_outputValueCalc
         Schema: inputValueCalc-Embedded.dfdl.xsd
	   Root: ivc_27
	Purpose: This test has inputValueCalc and outputValueCalc defined on the same element and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_with_outputValueCalc"
    root="ivc_27" model="inputValueCalc-Embedded.dfdl.xsd" description="DFDL-17-007R6">

    <tdml:document/>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>Cannot have both dfdl:inputValueCalc and dfdl:outputValueCalc on the same element</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
      Test Name: InputValueCalc_in_format
         Schema: inputValueCalc-invalid.dfdl.xsd
	   Root: e1
	Purpose: This test has inputValueCalc in the format and should have an error.
  -->
  <tdml:parserTestCase name="InputValueCalc_in_format"
    root="e1" model="inputValueCalc-invalid.dfdl.xsd" description="DFDL-17-007R6">

    <tdml:document/>
    <tdml:errors>
      <tdml:error>inputValueCalc</tdml:error>
      <tdml:error>not allowed</tdml:error>
      <tdml:error>dfdl:format</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

</tdml:testSuite>
